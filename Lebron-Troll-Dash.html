<!DOCTYPE html>
<!-- All actual code was made by chatgpt, however the ideas were generated by our noggins. -->
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>LeBron Troll Dash - Genesis Challenge</title>
<style>
  :root {
    --dark-bg: #1a1a1a;
    --dark-ground: #2e2e2e;
    --dark-text: #eee;
    --light-bg: #f0f0f0;
    --light-ground: #ccc;
    --light-text: #222;
  }
  body {
    background: var(--dark-bg);
    color: var(--dark-text);
    font-family: 'Arial Black', Arial, sans-serif;
    margin: 0;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    align-items: center;
    transition: background 0.5s, color 0.5s;
    height: 100vh;
  }
  body.light-mode {
    background: var(--light-bg);
    color: var(--light-text);
  }
  #game {
    position: relative;
    width: 900px;
    height: 300px;
    background: linear-gradient(to top, #222 0%, #555 100%);
    border-radius: 12px;
    box-shadow: 0 0 25px #0ff inset;
    border: 4px solid #0a0a0a;
    overflow: hidden;
    margin-top: 20px;
    transition: background 0.5s;
  }
  body.light-mode #game {
    background: linear-gradient(to top, #bbb 0%, #eee 100%);
    border-color: #008080;
    box-shadow: 0 0 25px #008080 inset;
  }
  #ground {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 60px;
    background: var(--dark-ground);
    border-top: 4px solid #444;
    transition: background 0.5s;
    border-radius: 0 0 12px 12px;
  }
  body.light-mode #ground {
    background: var(--light-ground);
    border-color: #999;
  }
  .character, .troll, .obstacle {
    position: absolute;
    bottom: 60px;
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
  }
  .character {
    width: 80px;
    height: 80px;
    left: 70px;
    transition: bottom 0.1s ease-out;
  }
  .troll {
    width: 60px;
    height: 60px;
    background-image: url('https://images.vexels.com/media/users/3/143350/isolated/preview/150164edc7f28a716bfceae9dd58cf2c-coolface-trollface-meme-by-vexels.png'); <!-- This and following images scoured by our own two hands -->
  }
  .obstacle {
    width: 45px;
    height: 45px;
    background-color: #d22;
    clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
    box-shadow: 0 0 15px #a00;
  }
  #genesis {
    position: absolute;
    top: 10px;
    right: 10px;
    width: 90px;
    height: 90px;
    border-radius: 50%;
    background: url('https://media.licdn.com/dms/image/v2/D4E03AQGHGv-EZgG3Aw/profile-displayphoto-scale_200_200/B4EZgYZqiBHoAY-/0/1752756038276?e=2147483647&v=beta&t=lgtgNFeCxM9X7HJ26dcVsHugryeIfc8N452WCxOfrOg') no-repeat center/cover;
    border: 4px solid #0ff;
    display: none;
    box-shadow: 0 0 15px #0ff;
  }
  #message {
    margin-top: 20px;
    font-size: 20px;
    min-height: 30px;
    user-select: none;
    font-weight: bold;
  }
  button {
    margin: 8px 6px;
    padding: 10px 20px;
    font-size: 16px;
    cursor: pointer;
    user-select: none;
    border-radius: 6px;
    border: none;
    background: #0ff;
    color: #111;
    font-weight: bold;
    box-shadow: 0 0 10px #0ff;
    transition: background 0.3s;
  }
  button:hover {
    background: #08c;
    color: #fff;
  }
  #toggleMode {
    position: fixed;
    top: 10px;
    left: 10px;
    z-index: 10000;
  }
  #muteBtn {
    position: fixed;
    bottom: 10px;
    right: 10px;
    z-index: 10000;
  }
  #characterSelect {
    margin-top: 10px;
    display: flex;
    gap: 20px;
    align-items: center;
    justify-content: center;
  }
  .charOption {
    cursor: pointer;
    border: 3px solid transparent;
    border-radius: 12px;
    padding: 4px;
    transition: border-color 0.3s;
  }
  .charOption.selected {
    border-color: #0ff;
  }
  .charOption img {
    width: 80px;
    height: 80px;
    border-radius: 12px;
    object-fit: cover;
  }
  #celebrationOverlay {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,255,255,0.9);
    color: #003333;
    font-size: 48px;
    font-weight: 900;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    z-index: 99999;
    display: none;
    user-select: none;
  }
  #celebrationOverlay button {
    font-size: 24px;
    margin-top: 30px;
    background: #003333;
    color: #0ff;
    box-shadow: none;
  }
</style>
</head>
<body>

<button id="toggleMode" title="Toggle Light/Dark Mode">Light Mode</button>

<h1>LeBron Troll Dash - Genesis Challenge</h1>

<div id="characterSelect">
  <div class="charOption selected" data-char="lebron" title="LeBron">
    <img src="https://tse3.mm.bing.net/th/id/OIP.pzpdYVoz4Mo9IDrN0HK9ZgHaEK?cb=12&rs=1&pid=ImgDetMain&o=7&rm=3" alt="LeBron" />
  </div>
  <div class="charOption" data-char="ethan" title="Ethan Gardner">
    <img src="https://www.waketech.edu/sites/default/files/2024-09/Wake-Tech-Faculty-Ethan-Gardner.webp" alt="Ethan Gardner" />
  </div>
</div>

<div id="game">
  <div id="ground"></div>
  <div id="character" class="character" style="background-image: url('https://tse3.mm.bing.net/th/id/OIP.pzpdYVoz4Mo9IDrN0HK9ZgHaEK?cb=12&rs=1&pid=ImgDetMain&o=7&rm=3'); bottom:60px;"></div>
  <div id="genesis" title="Genesis - The Guardian"></div>
</div>

<div id="message">Press SPACE to jump. Collect trolls, avoid obstacles!</div>

<button id="startBtn">Start Game</button>
<button id="muteBtn">Mute Music</button>

<!-- Single background music iframe -->
<iframe id="bgMusic" 
        src="https://www.youtube.com/embed/9PT67OXezZU?autoplay=1&loop=1&playlist=9PT67OXezZU&controls=0&showinfo=0&mute=0" <!-- Song choice by Kat :3 -->
        style="display:none;" 
        allow="autoplay" allowfullscreen></iframe>

<div id="celebrationOverlay">
  ðŸŽ‰ You defeated the Genesis! ðŸŽ‰
  <button id="playAgainBtn">Play Again</button>
</div>

<script>
const game = document.getElementById('game');
const character = document.getElementById('character');
const message = document.getElementById('message');
const startBtn = document.getElementById('startBtn');
const genesis = document.getElementById('genesis');
const muteBtn = document.getElementById('muteBtn');
const toggleModeBtn = document.getElementById('toggleMode');
const bgMusic = document.getElementById('bgMusic');
const celebrationOverlay = document.getElementById('celebrationOverlay');
const playAgainBtn = document.getElementById('playAgainBtn');
const charOptions = document.querySelectorAll('.charOption');

const gameWidth = 900;
const groundHeight = 60;

let isJumping = false;
let jumpSpeed = 0;
let gravity = 0.8;
let characterBottom = groundHeight;
let gameInterval;
let obstacleInterval;
let trollInterval;
let bossFightTimerInterval;

let obstacles = [];
let trolls = [];
let trollsCollected = 0;
let totalTrollsNeeded = 5;
let gameRunning = false;
let inBossFight = false;
let bossFightTimeLeft = 0;
let currentCharacter = 'lebron';
let isMuted = false;
let jumpCount = 0;

const funnyMessages = [
  "Wow, you're already halfway to troll greatness!",
  "Keep it up! The trolls are impressed.",
  "Did you bring snacks for the trolls?",
  "Watch out! Trolls like to play tricks.",
  "You got this! Trolls fear your skills.",
];

function updateCharacterImage() {
  if(currentCharacter === 'lebron') {
    character.style.backgroundImage = "url('https://tse3.mm.bing.net/th/id/OIP.pzpdYVoz4Mo9IDrN0HK9ZgHaEK?cb=12&rs=1&pid=ImgDetMain&o=7&rm=3')";
  } else {
    character.style.backgroundImage = "url('https://www.waketech.edu/sites/default/files/2024-09/Wake-Tech-Faculty-Ethan-Gardner.webp')";
  }
}

function createObstacle(xPos) {
  const obs = document.createElement('div');
  obs.className = 'obstacle';
  obs.style.left = xPos + 'px';
  obs.style.bottom = groundHeight + 'px';
  game.appendChild(obs);
  obstacles.push(obs);
}

function createTroll(xPos) {
  const troll = document.createElement('div');
  troll.className = 'troll';
  troll.style.left = xPos + 'px';
  troll.style.bottom = groundHeight + 'px';
  game.appendChild(troll);
  trolls.push(troll);
}

function removeElement(el, arr) {
  if(el.parentNode) el.parentNode.removeChild(el);
  const idx = arr.indexOf(el);
  if (idx > -1) arr.splice(idx,1);
}

function clearEntities() {
  obstacles.forEach(o => o.remove());
  trolls.forEach(t => t.remove());
  obstacles = [];
  trolls = [];
}

function isColliding(r1, r2) {
  return !(r1.top > r2.bottom || r1.bottom < r2.top || r1.right < r2.left || r1.left > r2.right);
}

function gameLoop() {
  obstacles.forEach(obs => {
    let x = parseInt(obs.style.left);
    x -= 8;
    if(x < -50) removeElement(obs, obstacles);
    else obs.style.left = x + 'px';
  });
  trolls.forEach(troll => {
    let x = parseInt(troll.style.left);
    x -= 8;
    if(x < -60) removeElement(troll, trolls);
    else troll.style.left = x + 'px';
  });

  if(isJumping) {
    characterBottom += jumpSpeed;
    jumpSpeed -= gravity;
    if(characterBottom <= groundHeight) {
      characterBottom = groundHeight;
      isJumping = false;
      jumpSpeed = 0;
      jumpCount = 0;
    }
    character.style.bottom = characterBottom + 'px';
  }

  const charRect = character.getBoundingClientRect();
  for(let obs of obstacles) {
    const obsRect = obs.getBoundingClientRect();
    if(isColliding(charRect, obsRect)) {
      endGame(false);
      return;
    }
  }

  if(!inBossFight) {
    for(let troll of [...trolls]) {
      const trollRect = troll.getBoundingClientRect();
      if(isColliding(charRect, trollRect)) {
        trollsCollected++;
        removeElement(troll, trolls);
        message.textContent = `Level - Trolls collected: ${trollsCollected}/${totalTrollsNeeded}`;
        if (trollsCollected === 2) {
          const msg = funnyMessages[Math.floor(Math.random() * funnyMessages.length)];
          setTimeout(() => {
            message.textContent = msg;
            setTimeout(() => {
              if(!inBossFight && gameRunning) message.textContent = `Level - Trolls collected: ${trollsCollected}/${totalTrollsNeeded}`;
            }, 3000);
          }, 100);
        }
        if(trollsCollected >= totalTrollsNeeded) startBossFight();
      }
    }
  }
}

function startBossFight() {
  inBossFight = true;
  genesis.style.display = 'block';
  message.textContent = "Boss fight! Defeat the Genesis!";
  trollsCollected = 0;
  clearEntities();

  bossFightTimeLeft = 20;
  bossFightTimerInterval = setInterval(() => {
    bossFightTimeLeft--;
    message.textContent = `Boss fight! Time left: ${bossFightTimeLeft}s`;
    if(bossFightTimeLeft <= 0) {
      clearInterval(bossFightTimerInterval);
      endGame(false);
    }
  }, 1000);
}

function endGame(won) {
  clearInterval(gameInterval);
  clearInterval(obstacleInterval);
  clearInterval(trollInterval);
  clearInterval(bossFightTimerInterval);
  gameRunning = false;
  inBossFight = false;
  genesis.style.display = 'none';
  clearEntities();
  characterBottom = groundHeight;
  character.style.bottom = characterBottom + 'px';
  jumpCount = 0;
  isJumping = false;
  if(won) showCelebration();
  else {
    message.textContent = "TROLOLOLOLOLOL"; <!-- Text by me :D -->
    startBtn.style.display = 'inline-block';
  }
}

function showCelebration() {
  celebrationOverlay.style.display = 'flex';
  message.textContent = '';
  startBtn.style.display = 'none';
}

function spawnObstacle() {
  if(!gameRunning) return;
  const xPos = gameWidth + Math.random() * 200;
  createObstacle(xPos);
}

function spawnTroll() {
  if(!inBossFight && gameRunning) {
    const xPos = gameWidth + Math.random() * 300;
    createTroll(xPos);
  }
}

document.body.onkeydown = e => {
  if(e.code === 'Space' && gameRunning) {
    if(jumpCount < 2) {
      isJumping = true;
      jumpSpeed = 18;
      jumpCount++;
    }
    e.preventDefault();
  }
};

startBtn.onclick = () => {
  startBtn.style.display = 'none';
  message.textContent = 'Collect 5 trolls to start the boss fight!';
  trollsCollected = 0;
  gameRunning = true;
  inBossFight = false;
  genesis.style.display = 'none';
  characterBottom = groundHeight;
  character.style.bottom = characterBottom + 'px';
  jumpCount = 0;
  isJumping = false;
  clearEntities();
  gameInterval = setInterval(gameLoop, 20);
  obstacleInterval = setInterval(spawnObstacle, 1500);
  trollInterval = setInterval(spawnTroll, 2000);
};

toggleModeBtn.onclick = () => {
  document.body.classList.toggle('light-mode');
  toggleModeBtn.textContent = document.body.classList.contains('light-mode') ? 'Dark Mode' : 'Light Mode';
};

muteBtn.onclick = () => {
  isMuted = !isMuted;
  bgMusic.src = isMuted 
    ? "https://www.youtube.com/embed/9PT67OXezZU?autoplay=1&loop=1&playlist=9PT67OXezZU&controls=0&showinfo=0&mute=1"
    : "https://www.youtube.com/embed/9PT67OXezZU?autoplay=1&loop=1&playlist=9PT67OXezZU&controls=0&showinfo=0&mute=0";
  muteBtn.textContent = isMuted ? 'Unmute Music' : 'Mute Music';
};

charOptions.forEach(option => {
  option.onclick = () => {
    charOptions.forEach(opt => opt.classList.remove('selected'));
    option.classList.add('selected');
    currentCharacter = option.getAttribute('data-char');
    updateCharacterImage();
  };
});

playAgainBtn.onclick = () => {
  celebrationOverlay.style.display = 'none';
  startBtn.style.display = 'inline-block';
  message.textContent = 'Press Start to Play Again!';
};

window.onload = updateCharacterImage;
</script>
</body>
</html>
